# facade_home_theater.py

#Подсистемы

class TV:
    def on(self):
        print("Телевизор включен.")

    def off(self):
        print("Телевизор выключен.")

    def set_channel(self, channel):
        print(f"Телевизор переключен на канал {channel}.")


class AudioSystem:
    def on(self):
        print("Аудиосистема включена.")

    def off(self):
        print("Аудиосистема выключена.")

    def set_volume(self, level):
        print(f"Громкость установлена на уровень {level}.")


class DVDPlayer:
    def play(self):
        print("DVD воспроизведение начато.")

    def pause(self):
        print("DVD воспроизведение приостановлено.")

    def stop(self):
        print("DVD воспроизведение остановлено.")


class GameConsole:
    def on(self):
        print("Игровая консоль включена.")

    def start_game(self, game_name):
        print(f"Запуск игры: {game_name}.")


# Класс-фасад

class HomeTheaterFacade:
    def __init__(self, tv: TV, audio: AudioSystem, dvd: DVDPlayer, console: GameConsole):
        self.tv = tv
        self.audio = audio
        self.dvd = dvd
        self.console = console

    def watch_movie(self):
        print("\nСценарий: просмотр фильма")
        self.tv.on()
        self.audio.on()
        self.audio.set_volume(7)
        self.dvd.play()
        print("Приятного просмотра!\n")

    def stop_movie(self):
        print("\n=== Остановка фильма ===")
        self.dvd.stop()
        self.audio.off()
        self.tv.off()
        print("Система выключена.\n")

    def play_game(self, game_name):
        print("\nСценарий: запуск игры")
        self.tv.on()
        self.audio.on()
        self.console.on()
        self.audio.set_volume(8)
        self.console.start_game(game_name)
        print("Игра запущена!\n")

    def listen_music(self):
        print("\Сценарий: прослушивание музыки")
        self.tv.on()
        self.audio.on()
        self.audio.set_volume(5)
        print("Аудиовход на телевизоре установлен на AUX.")
        print("Музыка воспроизводится.\n")

    def set_volume(self, level):
        print("\ Изменение громкости")
        self.audio.set_volume(level)
        print()


# Клиент код

if __name__ == "__main__":
    tv = TV()
    audio = AudioSystem()
    dvd = DVDPlayer()
    console = GameConsole()

    home_theater = HomeTheaterFacade(tv, audio, dvd, console)

    home_theater.watch_movie()
    home_theater.set_volume(10)
    home_theater.stop_movie()
    home_theater.play_game("FIFA 25")
    home_theater.listen_music()



# 2 часть Компоновщик

from abc import ABC, abstractmethod

# Компонент
class FileSystemComponent(ABC):
    @abstractmethod
    def display(self, indent=0):
        pass

    @abstractmethod
    def get_size(self):
        pass


#  ЛистФайл
class File(FileSystemComponent):
    def __init__(self, name, size):
        self.name = name
        self.size = size

    def display(self, indent=0):
        print(" " * indent + f"Файл: {self.name} ({self.size} КБ)")

    def get_size(self):
        return self.size


#КомпоновщикПапка
class Directory(FileSystemComponent):
    def __init__(self, name):
        self.name = name
        self.children = []

    def add(self, component):
        if component in self.children:
            print(f" Компонент '{component.name}' уже существует в '{self.name}'.")
        else:
            self.children.append(component)
            print(" Добавлен '{component.name}' в папку '{self.name}'.")

    def remove(self, component):
        if component in self.children:
            self.children.remove(component)
            print(f" Удален '{component.name}' из папки '{self.name}'.")
        else:
            print("Компонент '{component.name}' не найден в '{self.name}'.")

    def display(self, indent=0):
        print(" " * indent + f"Папка: {self.name}")
        for child in self.children:
            child.display(indent + 4)

    def get_size(self):
        total_size = sum(child.get_size() for child in self.children)
        return total_size


#  Клиент коды
if __name__ == "__main__":
    # Создание файлов
    file1 = File("report.docx", 120)
    file2 = File("photo.jpg", 2500)
    file3 = File("music.mp3", 5000)
    file4 = File("video.mp4", 15000)

    # Создание папок
    docs = Directory("Документы")
    media = Directory("Медиа")
    root = Directory("Главная папка")

    # Добавляем файлы и папки
    docs.add(file1)
    media.add(file2)
    media.add(file3)
    media.add(file4)

    root.add(docs)
    root.add(media)

    # Выводим иерархию
    print("\nСтруктура файловой системы")
    root.display()

    # Общий размер
    print(f"\nОбщий размер всех файлов: {root.get_size()} КБ")

    # Проверка удаления и повторного добавления
    root.remove(media)
    root.add(media)
